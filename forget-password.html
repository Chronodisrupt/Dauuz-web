<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reset Password</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="background:#0f0f0f;color:#fff;font-family:Arial;display:flex;align-items:center;justify-content:center;height:100vh">

  <div style="background:#161616;padding:24px;border-radius:12px;width:100%;max-width:360px">
    <h2>Reset Password</h2>
    <input id="password" type="password" placeholder="New password"
      style="width:100%;padding:12px;margin:12px 0;border-radius:8px;border:none">
    <button id="update"
      style="width:100%;padding:12px;border:none;border-radius:8px;background:#d4a254;font-weight:bold">
      Update Password
    </button>
    <p id="msg" style="margin-top:10px"></p>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {

      // âœ… USE YOUR ACTUAL PROJECT (same as auth.js)
const supabaseUrl = 'https://ydeczzyvfgwwmfornfef.supabase.co';
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkZWN6enl2Zmd3d21mb3JuZmVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc5Njc1ODksImV4cCI6MjA4MzU0MzU4OX0.IBNkcqDJtQSurdKaic94iRrc4NYnO8m1e1bQzbkkstc";

      const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

      document.getElementById("update").onclick = async () => {
        const password = document.getElementById("password").value;

        if (!password || password.length < 6) {
          document.getElementById("msg").textContent =
            "Password must be at least 6 characters.";
          return;
        }

        const { error } = await supabase.auth.updateUser({ password });

        const msgEl = document.getElementById("msg");

        if (error) {
          msgEl.textContent = error.message;
        } else {
          msgEl.textContent =
            "Password updated! Redirecting to login...";

          // Give the user 2 seconds, then send to login
          setTimeout(() => {
            window.location.href = "login.html";
          }, 2000);
        }
      };
    });
  </script>

</body>
</html>
